<div class="vragenlijst-container">
  <!-- Header -->
  <div class="header">
    <h1>Vragenbeheer</h1>
    <p>Beheer alle vragen in het tevredenheidsonderzoek</p>
  </div>

  <!-- Statistieken -->
  <div class="stats-section">
    <div class="stat-card">
      <div class="stat-number">{{ totalQuestions }}</div>
      <div class="stat-label">Totaal vragen</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">{{ getQuestionCountByCategory('eten') }}</div>
      <div class="stat-label">Eten vragen</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">{{ getQuestionCountByCategory('zorg') }}</div>
      <div class="stat-label">Zorg vragen</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">{{ getQuestionCountByCategory('activiteiten') }}</div>
      <div class="stat-label">Activiteiten vragen</div>
    </div>
  </div>

  <!-- Actiebalk -->
  <div class="action-bar">
    <button class="btn-primary" (click)="showAddQuestionForm()">
      <span class="btn-icon">+</span>
      Nieuwe vraag toevoegen
    </button>

    <div class="filters">
      <div class="search-box">
        <input type="text" 
               [(ngModel)]="searchTerm" 
               (input)="onSearchChange()"
               placeholder="Zoek vragen..." 
               class="search-input">
        <span class="search-icon">üîç</span>
      </div>

      <select [(ngModel)]="selectedCategory" (change)="onCategoryChange()" class="category-filter">
        <option value="all">Alle categorie√´n</option>
        <option *ngFor="let category of categories" [value]="category.name">
          {{ getCategoryName(category.name) }} ({{ getQuestionCountByCategory(category.name) }})
        </option>
      </select>
    </div>
  </div>

  <!-- Toevoeg/Bewerk Formulier -->
  <div *ngIf="showAddForm" class="form-section">
    <div class="form-card">
      <h3>{{ editingQuestion ? 'Vraag bewerken' : 'Nieuwe vraag toevoegen' }}</h3>
      
      <div class="form-group">
        <label for="questionText">Vraag:</label>
        <textarea 
          id="questionText"
          [(ngModel)]="newQuestion.question"
          placeholder="Voer de vraag in..."
          class="form-textarea"
          rows="3">
        </textarea>
      </div>

      <div class="form-group">
        <label for="questionCategory">Categorie:</label>
        <select id="questionCategory" [(ngModel)]="newQuestion.category" class="form-select">
          <option *ngFor="let category of categories" [value]="category.name">
            {{ getCategoryName(category.name) }}
          </option>
        </select>
      </div>

      <div class="form-actions">
        <button class="btn-secondary" (click)="cancelEdit()">Annuleren</button>
        <button class="btn-primary" (click)="saveQuestion()">
          {{ editingQuestion ? 'Opslaan' : 'Toevoegen' }}
        </button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading || areCategoriesLoading" class="loading">
    <div class="spinner"></div>
    <p>Vragen worden geladen...</p>
  </div>

  <!-- Vragen Lijst -->
  <div *ngIf="!isLoading && !areCategoriesLoading" class="questions-container">
    <!-- Resultaat informatie -->
    <div class="results-info">
      <span class="results-count">
        Toon {{ getDisplayedRange() }} van {{ filteredQuestions.length }} vragen
      </span>
      <div class="page-size-selector">
        <label for="pageSize">Items per pagina:</label>
        <select id="pageSize" [(ngModel)]="pageSize" (change)="onPageSizeChange()" class="page-size-select">
          <option value="10">10</option>
          <option value="20">20</option>
          <option value="50">50</option>
        </select>
      </div>
    </div>

    <!-- Vragen Grid -->
    <div class="questions-grid">
      <div *ngFor="let question of paginatedQuestions" class="question-card">
        <div class="question-header">
          <div class="category-display">
            <span class="category-badge" [attr.data-category]="question.category">
              {{ getCategoryName(question.category) }}
            </span>
          </div>
          <div class="question-actions">
            <button class="btn-icon" (click)="editQuestion(question)" title="Bewerken">
              ‚úèÔ∏è
            </button>
            <button class="btn-icon btn-danger" (click)="deleteQuestion(question)" title="Verwijderen">
              üóëÔ∏è
            </button>
          </div>
        </div>

        <div class="question-content" (click)="viewQuestion(question)">
          <h3 class="question-text">{{ question.question }}</h3>
        </div>

        <div class="question-footer">
          <button class="btn-outline" (click)="viewQuestion(question)">
            Bekijk details
          </button>
        </div>
      </div>
    </div>

    <!-- Paginatie Controls -->
    <div class="pagination-container" *ngIf="totalPages > 1">
      <div class="pagination">
        <button class="pagination-btn" 
                [class.disabled]="currentPage === 1"
                (click)="goToPage(1)"
                title="Eerste pagina">
          ‚ùÆ‚ùÆ
        </button>
        
        <button class="pagination-btn" 
                [class.disabled]="currentPage === 1"
                (click)="previousPage()"
                title="Vorige pagina">
          ‚ùÆ
        </button>

        <!-- Page Numbers -->
        <div class="page-numbers">
          <button *ngFor="let page of getVisiblePages()" 
                  class="pagination-btn page-number"
                  [class.active]="page === currentPage"
                  (click)="goToPage(page)">
            {{ page }}
          </button>
          
          <span *ngIf="showEllipsisStart" class="pagination-ellipsis">...</span>
          
          <span *ngIf="showEllipsisEnd" class="pagination-ellipsis">...</span>
        </div>

        <button class="pagination-btn" 
                [class.disabled]="currentPage === totalPages"
                (click)="nextPage()"
                title="Volgende pagina">
          ‚ùØ
        </button>
        
        <button class="pagination-btn" 
                [class.disabled]="currentPage === totalPages"
                (click)="goToPage(totalPages)"
                title="Laatste pagina">
          ‚ùØ‚ùØ
        </button>
      </div>

      <!-- Page Info -->
      <div class="page-info">
        Pagina {{ currentPage }} van {{ totalPages }}
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && !areCategoriesLoading && filteredQuestions.length === 0" class="empty-state">
    <div *ngIf="searchTerm || selectedCategory !== 'all'">
      <h3>Geen vragen gevonden</h3>
      <p>Geen vragen gevonden met de huidige filters. Probeer een andere zoekterm of categorie.</p>
      <button class="btn-primary" (click)="searchTerm = ''; selectedCategory = 'all'; applyFilters()">
        Toon alle vragen
      </button>
    </div>
    <div *ngIf="!searchTerm && selectedCategory === 'all' && questions.length === 0">
      <h3>Nog geen vragen</h3>
      <p>Er zijn nog geen vragen aangemaakt. Voeg uw eerste vraag toe!</p>
      <button class="btn-primary" (click)="showAddQuestionForm()">
        Eerste vraag toevoegen
      </button>
    </div>
  </div>
</div>